{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport AppHeader from \"./Header.vue\";\nimport AppFooter from \"./Footer.vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"GeneralForum\",\n  components: {\n    AppHeader,\n    AppFooter\n  },\n  data() {\n    return {\n      articles: [],\n      currentPage: 1,\n      itemsPerPage: 7,\n      searchType: 'all',\n      searchKeyword: ''\n    };\n  },\n  computed: {\n    filteredList() {\n      if (!this.searchKeyword) return this.articles;\n      return this.articles.filter(article => {\n        const keyword = this.searchKeyword.toLowerCase();\n        switch (this.searchType) {\n          case 'title':\n            return article.articleTitle.toLowerCase().includes(keyword);\n          case 'author':\n            return article.memberNickname.toLowerCase().includes(keyword);\n          case 'all':\n            return article.articleTitle.toLowerCase().includes(keyword) || article.memberNickname.toLowerCase().includes(keyword);\n          default:\n            return true;\n        }\n      });\n    },\n    paginatedArticles() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.filteredList.slice(start, end);\n    },\n    totalPages() {\n      return Math.ceil(this.filteredList.length / this.itemsPerPage);\n    }\n  },\n  methods: {\n    async fetchArticles() {\n      try {\n        const token = localStorage.getItem(\"jwtToken\");\n        const beUrl = process.env.VUE_APP_BE_API_URL;\n        const response = await axios.get(beUrl + \"/api/v1/articles\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          withCredentials: true\n        });\n        this.articles = response.data.sort((a, b) => b.articleId - a.articleId);\n      } catch (error) {\n        console.error(\"Failed to fetch articles:\", error);\n        alert(\"게시글을 불러오는데 실패했습니다.\");\n      }\n    },\n    viewArticle(articleId) {\n      this.$router.push(`/articles/${articleId}`);\n    },\n    formatDate(dateArray) {\n      if (!dateArray || !Array.isArray(dateArray)) return '';\n      try {\n        const year = dateArray[0];\n        const month = String(dateArray[1]).padStart(2, '0');\n        const day = String(dateArray[2]).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n      } catch (error) {\n        console.error('Date formatting error:', error);\n        return '';\n      }\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    },\n    goToPage(pageNum) {\n      this.currentPage = pageNum;\n    },\n    getDisplayedPages() {\n      const totalPages = this.totalPages;\n      const current = this.currentPage;\n      if (totalPages <= 5) {\n        return Array.from({\n          length: totalPages\n        }, (_, i) => i + 1);\n      }\n      if (current <= 3) {\n        return [1, 2, 3, 4, 5];\n      }\n      if (current >= totalPages - 2) {\n        return [totalPages - 4, totalPages - 3, totalPages - 2, totalPages - 1, totalPages];\n      }\n      return [current - 2, current - 1, current, current + 1, current + 2];\n    },\n    handleSearch() {\n      this.currentPage = 1;\n    }\n  },\n  watch: {\n    searchType() {\n      this.currentPage = 1;\n    }\n  },\n  mounted() {\n    this.fetchArticles();\n  }\n};","map":{"version":3,"names":["AppHeader","AppFooter","axios","name","components","data","articles","currentPage","itemsPerPage","searchType","searchKeyword","computed","filteredList","filter","article","keyword","toLowerCase","articleTitle","includes","memberNickname","paginatedArticles","start","end","slice","totalPages","Math","ceil","length","methods","fetchArticles","token","localStorage","getItem","beUrl","process","env","VUE_APP_BE_API_URL","response","get","headers","Authorization","withCredentials","sort","a","b","articleId","error","console","alert","viewArticle","$router","push","formatDate","dateArray","Array","isArray","year","month","String","padStart","day","nextPage","prevPage","goToPage","pageNum","getDisplayedPages","current","from","_","i","handleSearch","watch","mounted"],"sources":["/home/runner/work/FE/FE/src/components/Articles.vue"],"sourcesContent":["<template>\n  <div class=\"scroll-container\">\n    <div class=\"home-page\">\n      <AppHeader />\n      <div class=\"content\">\n        <div class=\"forum-board\">\n          <div class=\"search-area\">\n            <div class=\"total-count\">전체 {{ filteredList.length }}건</div>\n            <div class=\"search-container\">\n              <select v-model=\"searchType\" class=\"search-select\">\n                <option value=\"all\">전체</option>\n                <option value=\"title\">제목</option>\n                <option value=\"author\">작성자</option>\n              </select>\n              <input \n                type=\"text\" \n                v-model=\"searchKeyword\" \n                class=\"search-input\" \n                placeholder=\"검색어를 입력하세요\"\n                @keyup.enter=\"handleSearch\"\n              >\n              <button class=\"search-button\" @click=\"handleSearch\">검색</button>\n            </div>\n          </div>\n          <div class=\"table-container\">\n            <table class=\"forum-table\">\n              <thead>\n                <tr>\n                  <th class=\"column-10\">번호</th>\n                  <th class=\"column-50\">제목</th>\n                  <th class=\"column-20\">작성자</th>\n                  <th class=\"column-20\">작성일</th>\n                </tr>\n              </thead>\n              <tbody>\n                <template v-for=\"i in itemsPerPage\" :key=\"i\">\n                  <tr v-if=\"paginatedArticles[i-1]\" @click=\"viewArticle(paginatedArticles[i-1].articleId)\" class=\"article-row\">\n                    <td class=\"id-cell\">{{ paginatedArticles[i-1].articleId }}</td>\n                    <td class=\"title-cell\">{{ paginatedArticles[i-1].articleTitle }}</td>\n                    <td class=\"author-cell\">{{ paginatedArticles[i-1].memberNickname }}</td>\n                    <td class=\"date-cell\">{{ formatDate(paginatedArticles[i-1].createdAt) }}</td>\n                  </tr>\n                  <tr v-else class=\"empty-row\">\n                    <td colspan=\"4\">&nbsp;</td>\n                  </tr>\n                </template>\n              </tbody>\n            </table>\n            <div class=\"pagination-container\">\n              <div class=\"dummy-button\">글쓰기</div>\n              <div class=\"pagination-wrapper\">\n\n                <button class=\"nav-btn prev\" @click=\"prevPage\" :disabled=\"currentPage === 1\">\n                  &lt;\n                </button>\n                <div class=\"page-numbers\">\n                  <button \n                    v-for=\"pageNum in getDisplayedPages()\" \n                    :key=\"pageNum\"\n                    :class=\"['page-num', { active: currentPage === pageNum }]\"\n                    @click=\"goToPage(pageNum)\"\n                  >\n                    {{ pageNum }}\n                  </button>\n                </div>\n                <button class=\"nav-btn next\" @click=\"nextPage\" :disabled=\"currentPage === totalPages\">\n                  &gt;\n                </button>\n              </div>\n              <button class=\"write-button\" @click=\"$router.push('/articleform')\">\n                글쓰기\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <AppFooter />\n    </div>\n  </div>\n</template>\n\n<script>\nimport AppHeader from \"./Header.vue\";\nimport AppFooter from \"./Footer.vue\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"GeneralForum\",\n  components: {\n    AppHeader,\n    AppFooter,\n  },\n  data() {\n    return {\n      articles: [],\n      currentPage: 1,\n      itemsPerPage: 7,\n      searchType: 'all',\n      searchKeyword: '',\n    };\n  },\n  computed: {\n    filteredList() {\n      if (!this.searchKeyword) return this.articles;\n      \n      return this.articles.filter(article => {\n        const keyword = this.searchKeyword.toLowerCase();\n        switch (this.searchType) {\n          case 'title':\n            return article.articleTitle.toLowerCase().includes(keyword);\n          case 'author':\n            return article.memberNickname.toLowerCase().includes(keyword);\n          case 'all':\n            return article.articleTitle.toLowerCase().includes(keyword) ||\n                   article.memberNickname.toLowerCase().includes(keyword);\n          default:\n            return true;\n        }\n      });\n    },\n    paginatedArticles() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.filteredList.slice(start, end);\n    },\n    totalPages() {\n      return Math.ceil(this.filteredList.length / this.itemsPerPage);\n    },\n  },\n  methods: {\n    async fetchArticles() {\n      try {\n        const token = localStorage.getItem(\"jwtToken\");\n        const beUrl = process.env.VUE_APP_BE_API_URL;\n        const response = await axios.get(beUrl + \"/api/v1/articles\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n          withCredentials: true\n        });\n        this.articles = response.data.sort((a, b) => b.articleId - a.articleId);\n      } catch (error) {\n        console.error(\"Failed to fetch articles:\", error);\n        alert(\"게시글을 불러오는데 실패했습니다.\");\n      }\n    },\n    viewArticle(articleId) {\n      this.$router.push(`/articles/${articleId}`);\n    },\n    formatDate(dateArray) {\n      if (!dateArray || !Array.isArray(dateArray)) return '';\n      \n      try {\n        const year = dateArray[0];\n        const month = String(dateArray[1]).padStart(2, '0');\n        const day = String(dateArray[2]).padStart(2, '0');\n        \n        return `${year}-${month}-${day}`;\n      } catch (error) {\n        console.error('Date formatting error:', error);\n        return '';\n      }\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    },\n    goToPage(pageNum) {\n      this.currentPage = pageNum;\n    },\n    getDisplayedPages() {\n      const totalPages = this.totalPages;\n      const current = this.currentPage;\n      \n      if (totalPages <= 5) {\n        return Array.from({ length: totalPages }, (_, i) => i + 1);\n      }\n      \n      if (current <= 3) {\n        return [1, 2, 3, 4, 5];\n      }\n      \n      if (current >= totalPages - 2) {\n        return [\n          totalPages - 4,\n          totalPages - 3,\n          totalPages - 2,\n          totalPages - 1,\n          totalPages\n        ];\n      }\n      \n      return [current - 2, current - 1, current, current + 1, current + 2];\n    },\n    handleSearch() {\n      this.currentPage = 1;\n    },\n  },\n  watch: {\n    searchType() {\n      this.currentPage = 1;\n    }\n  },\n  mounted() {\n    this.fetchArticles();\n  }\n};\n</script>\n\n<style scoped>\n.scroll-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  z-index: 1;\n}\n\n.home-page {\n  position: relative;\n  min-height: 100%;\n  background-color: #fff;\n}\n\n.content {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  width: 100%;\n  padding-top: 80px;\n  padding-bottom: 40px;\n}\n\n.forum-board {\n  background-color: white;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.table-container {\n  width: 100%;\n}\n\n.total-count {\n  text-align: right;\n  margin-top: 10px;\n}\n\n.search-area {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  margin-top: 30px;\n  width: 100%;\n}\n\n.search-container {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  height: 40px;\n}\n\n.search-select {\n  width: 100px;\n  height: 40px;\n  padding: 0 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n  background-color: white;\n}\n\n.search-input {\n  width: 500px;\n  height: 40px;\n  padding: 0 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.search-button {\n  width: 80px;\n  height: 40px;\n  background-color: rgba(0, 0, 0, 0.865);\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.forum-table {\n  table-layout: fixed;\n  width: 100%;\n  border-collapse: collapse;\n  border-top: 2px solid #333;\n}\n\n.forum-table th,\n.forum-table td {\n  padding: 12px 15px;\n  border-bottom: 1px solid #ddd;\n  height: 52px;\n  vertical-align: middle;\n}\n\n.article-row {\n  cursor: pointer;\n}\n\n.article-row:hover {\n  background-color: #f8f9fa;\n}\n\n.pagination-container {\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 10px;\n  gap: 38%;\n}\n\n.pagination-wrapper {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.page-numbers {\n  display: flex;\n  gap: 5px;\n}\n\n.page-num,\n.nav-btn {\n  min-width: 30px;\n  height: 30px;\n  border: 1px solid #ddd;\n  background-color: white;\n  cursor: pointer;\n}\n\n.page-num.active {\n  background-color: rgba(0, 0, 0, 0.865);\n  color: white;\n}\n\n.pagination {\n  display: flex;\n  align-items: center;\n  gap: 20px;  /* 페이지네이션과 글쓰기 버튼 사이 간격 */\n}\n\n.write-button {\n  width: 76.35px;\n  padding: 8px 12px;\n  background-color: rgba(0, 0, 0, 0.865);\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 13px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n}\n.dummy-button {\n  width: 76.35px;\n  padding: 8px 12px;\n  background-color: transparent;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 13px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n}\n\n.write-button:hover {\n  background-color: #020906b3;\n}\n\n@media (max-width: 768px) {\n  .search-area {\n    flex-direction: column;\n    gap: 12px;\n  }\n\n  .search-container {\n    width: 100%;\n  }\n\n  .search-input {\n    width: 100%;\n  }\n}\n\n.column-10 {\n  width: 10%;\n  text-align: center;\n}\n\n.column-50 {\n  width: 50%;\n  text-align: left;\n}\n\n.column-20 {\n  width: 20%;\n  text-align: center;\n}\n\n.id-cell {\n  text-align: center;\n}\n\n.title-cell {\n  text-align: left;\n  padding-left: 20px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 0; /* 말줄임표를 위해 필요 */\n}\n\n.author-cell {\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.date-cell {\n  text-align: center;\n  white-space: nowrap;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}